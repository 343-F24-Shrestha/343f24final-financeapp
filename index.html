<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>FINANCE BROS</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <header>
            <h1>FINANCE BROS</h1>
        </header>
        <div class="middler">
            <aside aria-label="lefty">
                <img src="money_flower.png" alt="image of a Hand holding a flower made to look like money symbol">
            </aside>

            <main>
                <section>
                    <q id="quote">Loading quote...</q>
                </section>

                <form onsubmit="return validateAge()">
                    <label>
                        To Start Your Advising, Please Enter Your Age<br>
                        <input type="number" id="age" name="age" required min="18" max="100">
                    </label>
                    <button type="submit">Submit</button>
                </form>
            </main>

            <aside aria-label="righty">
                <img src="hand_flower.png" alt="image of a Hand holding a flower made to look like money symbol">
            </aside>
        </div>

        <footer>
            <a href="report.html">Project Report</a>
        </footer>

        <script>
            const quoteElement = document.getElementById('quote');

            // Your API key (replace 'YOUR_API_KEY' with your actual API key)
            const API_KEY = 'UqyVnK4Ik+d/kynr/zxmKQ==A2BgJvamgdwgS5IK';

            // Fetch a random quote from API Ninjas
            async function fetchQuote() {
                try {
                    const response = await fetch('https://api.api-ninjas.com/v1/quotes?category=business', {
                        method: 'GET',
                        headers: {
                            'X-Api-Key': API_KEY
                        }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    const quote = data[0].quote;
                    const author = data[0].author;

                    quoteElement.textContent = `"${quote}" - ${author}`;
                } catch (error) {
                    quoteElement.textContent = 'Could not load a quote. Please try again later.';
                    console.error('Error fetching quote:', error);
                }
            }

            fetchQuote();

            setInterval(fetchQuote, 20000);

            function validateAge() {
                const ageInput = document.getElementById('age').value;
                const age = parseInt(ageInput);

                if (isNaN(age) || age < 18 || age > 100) {
                    alert('Please enter a valid age between 18 and 100.');
                    return false;
                }

                localStorage.setItem('age', age);

                window.location.href = 'annual_income.html';

                return false;
            }
        </script>
    </body>
</html>
